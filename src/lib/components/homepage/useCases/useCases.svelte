<script lang="ts">
	import {
		IconChevronDown,
		IconPill,
		IconStethoscope,
		IconSchool,
		IconAmbulance
	} from '@tabler/icons-svelte';
	import { slide } from 'svelte/transition';
	import list from './text.json';

	const title = 'Use cases';
	const subTitle = "Auracare's triage system can be applied in any community care setting.";

	let openIndex = $state<number>(0);

	function toggle(index: number) {
		openIndex = openIndex === index ? -1 : index;
	}

	const iconMap = {
		IconPill,
		IconStethoscope,
		IconSchool,
		IconAmbulance
	};
</script>

<section class="section use-cases-section">
	<!-- Grid pattern background -->
	<svg class="grid-background" width="1440" height="1146" viewBox="0 0 1440 1146" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path opacity="0.2" d="M-186.328 162.688H-73.9727V0H-71.9727V162.688H40.3828V0H42.3828V162.688H154.737V0H156.737V162.688H267.361V0H269.361V162.688H381.716V0H383.716V162.688H496.071V0H498.071V162.688H610.427V0H612.427V162.688H723.05V0H725.05V162.688H837.405V0H839.405V162.688H951.761V0H953.761V162.688H1064.38V0H1066.38V162.688H1178.74V0H1180.74V162.688H1293.09V0H1295.09V162.688H1407.45V0H1409.45V162.688H1520.07V0H1522.07V162.688H1634.43V0H1636.43V162.688H1793.83V164.688H1636.43V277.51H1793.83V279.51H1636.43V392.329H1793.83V394.329H1636.43V507.149H1793.83V509.149H1636.43V621.97H1793.83V623.97H1636.43V736.79H1793.83V738.79H1636.43V851.61H1793.83V853.61H1636.43V966.431H1793.83V968.431H1636.43V1145.29H1634.43V968.431H1522.07V1145.29H1520.07V968.431H1409.45V1145.29H1407.45V968.431H1295.09V1145.29H1293.09V968.431H1180.74V1145.29H1178.74V968.431H1066.38V1145.29H1064.38V968.431H953.761V1145.29H951.761V968.431H839.405V1145.29H837.405V968.431H725.05V1145.29H723.05V968.431H612.427V1145.29H610.427V968.431H498.071V1145.29H496.071V968.431H383.716V1145.29H381.716V968.431H269.361V1145.29H267.361V968.431H156.737V1145.29H154.737V968.431H42.3828V1145.29H40.3828V968.431H-71.9727V1145.29H-73.9727V968.431H-186.328V1145.29H-188.328V968.431H-346V966.431H-188.328V853.61H-346V851.61H-188.328V738.79H-346V736.79H-188.328V623.97H-346V621.97H-188.328V509.149H-346V507.149H-188.328V394.329L-346 394.33V392.33L-188.328 392.329V279.51H-346V277.51H-188.328V164.688H-346V162.688H-188.328V0H-186.328V162.688ZM1522.07 853.61V966.431H1634.43V853.61H1522.07ZM-186.328 966.431H-73.9727V853.61H-186.328V966.431ZM-71.9727 966.431H40.3828V853.61H-71.9727V966.431ZM42.3828 966.431H154.737V853.61H42.3828V966.431ZM156.737 966.431H267.361V853.61H156.737V966.431ZM269.361 966.431H381.716V853.61H269.361V966.431ZM383.716 966.431H496.071V853.61H383.716V966.431ZM498.071 966.431H610.427V853.61H498.071V966.431ZM612.427 966.431H723.05V853.61H612.427V966.431ZM725.05 966.431H837.405V853.61H725.05V966.431ZM839.405 966.431H951.761V853.61H839.405V966.431ZM953.761 966.431H1064.38V853.61H953.761V966.431ZM1066.38 966.431H1178.74V853.61H1066.38V966.431ZM1180.74 966.431H1293.09V853.61H1180.74V966.431ZM1295.09 966.431H1407.45V853.61H1295.09V966.431ZM1409.45 966.431H1520.07V853.61H1409.45V966.431ZM1522.07 738.79V851.61H1634.43V738.79H1522.07ZM-186.328 851.61H-73.9727V738.79H-186.328V851.61ZM-71.9727 851.61H40.3828V738.79H-71.9727V851.61ZM42.3828 851.61H154.737V738.79H42.3828V851.61ZM156.737 851.61H267.361V738.79H156.737V851.61ZM269.361 851.61H381.716V738.79H269.361V851.61ZM383.716 851.61H496.071V738.79H383.716V851.61ZM498.071 851.61H610.427V738.79H498.071V851.61ZM612.427 851.61H723.05V738.79H612.427V851.61ZM725.05 851.61H837.405V738.79H725.05V851.61ZM839.405 851.61H951.761V738.79H839.405V851.61ZM953.761 851.61H1064.38V738.79H953.761V851.61ZM1066.38 851.61H1178.74V738.79H1066.38V851.61ZM1180.74 851.61H1293.09V738.79H1180.74V851.61ZM1295.09 851.61H1407.45V738.79H1295.09V851.61ZM1409.45 851.61H1520.07V738.79H1409.45V851.61ZM1522.07 623.97V736.79H1634.43V623.97H1522.07ZM-186.328 736.79H-73.9727V623.97H-186.328V736.79ZM-71.9727 736.79H40.3828V623.97H-71.9727V736.79ZM42.3828 736.79H154.737V623.97H42.3828V736.79ZM156.737 736.79H267.361V623.97H156.737V736.79ZM269.361 736.79H381.716V623.97H269.361V736.79ZM383.716 736.79H496.071V623.97H383.716V736.79ZM498.071 736.79H610.427V623.97H498.071V736.79ZM612.427 736.79H723.05V623.97H612.427V736.79ZM725.05 736.79H837.405V623.97H725.05V736.79ZM839.405 736.79H951.761V623.97H839.405V736.79ZM953.761 736.79H1064.38V623.97H953.761V736.79ZM1066.38 736.79H1178.74V623.97H1066.38V736.79ZM1180.74 736.79H1293.09V623.97H1180.74V736.79ZM1295.09 736.79H1407.45V623.97H1295.09V736.79ZM1409.45 736.79H1520.07V623.97H1409.45V736.79ZM1522.07 509.149V621.97H1634.43V509.149H1522.07ZM-186.328 621.97H-73.9727V509.149H-186.328V621.97ZM-71.9727 621.97H40.3828V509.149H-71.9727V621.97ZM42.3828 621.97H154.737V509.149H42.3828V621.97ZM156.737 621.97H267.361V509.149H156.737V621.97ZM269.361 621.97H381.716V509.149H269.361V621.97ZM383.716 621.97H496.071V509.149H383.716V621.97ZM498.071 621.97H610.427V509.149H498.071V621.97ZM612.427 621.97H723.05V509.149H612.427V621.97ZM725.05 621.97H837.405V509.149H725.05V621.97ZM839.405 621.97H951.761V509.149H839.405V621.97ZM953.761 621.97H1064.38V509.149H953.761V621.97ZM1066.38 621.97H1178.74V509.149H1066.38V621.97ZM1180.74 621.97H1293.09V509.149H1180.74V621.97ZM1295.09 621.97H1407.45V509.149H1295.09V621.97ZM1409.45 621.97H1520.07V509.149H1409.45V621.97ZM1522.07 394.329V507.149H1634.43V394.329H1522.07ZM-186.328 507.149H-73.9727V394.329H-186.328V507.149ZM-71.9727 507.149H40.3828V394.329H-71.9727V507.149ZM42.3828 507.149H154.737V394.329H42.3828V507.149ZM156.737 507.149H267.361V394.329H156.737V507.149ZM269.361 507.149H381.716V394.329H269.361V507.149ZM383.716 507.149H496.071V394.329H383.716V507.149ZM498.071 507.149H610.427V394.329H498.071V507.149ZM612.427 507.149H723.05V394.329H612.427V507.149ZM725.05 507.149H837.405V394.329H725.05V507.149ZM839.405 507.149H951.761V394.329H839.405V507.149ZM953.761 507.149H1064.38V394.329H953.761V507.149ZM1066.38 507.149H1178.74V394.329H1066.38V507.149ZM1180.74 507.149H1293.09V394.329H1180.74V507.149ZM1295.09 507.149H1407.45V394.329H1295.09V507.149ZM1409.45 507.149H1520.07V394.329H1409.45V507.149ZM1522.07 279.51V392.329H1634.43V279.51H1522.07ZM-186.328 392.329H-73.9727V279.51H-186.328V392.329ZM-71.9727 392.329H40.3828V279.51H-71.9727V392.329ZM42.3828 392.329H154.737V279.51H42.3828V392.329ZM156.737 392.329H267.361V279.51H156.737V392.329ZM269.361 392.329H381.716V279.51H269.361V392.329ZM383.716 392.329H496.071V279.51H383.716V392.329ZM498.071 392.329H610.427V279.51H498.071V392.329ZM612.427 392.329H723.05V279.51H612.427V392.329ZM725.05 392.329H837.405V279.51H725.05V392.329ZM839.405 392.329H951.761V279.51H839.405V392.329ZM953.761 392.329H1064.38V279.51H953.761V392.329ZM1066.38 392.329H1178.74V279.51H1066.38V392.329ZM1180.74 392.329H1293.09V279.51H1180.74V392.329ZM1295.09 392.329H1407.45V279.51H1295.09V392.329ZM1409.45 392.329H1520.07V279.51H1409.45V392.329ZM1522.07 164.688V277.51H1634.43V164.688H1522.07ZM-186.328 277.51H-73.9727V164.688H-186.328V277.51ZM-71.9727 277.51H40.3828V164.688H-71.9727V277.51ZM42.3828 277.51H154.737V164.688H42.3828V277.51ZM156.737 277.51H267.361V164.688H156.737V277.51ZM269.361 277.51H381.716V164.688H269.361V277.51ZM383.716 277.51H496.071V164.688H383.716V277.51ZM498.071 277.51H610.427V164.688H498.071V277.51ZM612.427 277.51H723.05V164.688H612.427V277.51ZM725.05 277.51H837.405V164.688H725.05V277.51ZM839.405 277.51H951.761V164.688H839.405V277.51ZM953.761 277.51H1064.38V164.688H953.761V277.51ZM1066.38 277.51H1178.74V164.688H1066.38V277.51ZM1180.74 277.51H1293.09V164.688H1180.74V277.51ZM1295.09 277.51H1407.45V164.688H1295.09V277.51ZM1409.45 277.51H1520.07V164.688H1409.45V277.51Z" fill="url(#paint0_radial_119_158)"/>
		<defs>
			<radialGradient id="paint0_radial_119_158" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(718.548 1724.05) rotate(180) scale(1300.45 1234.17)">
				<stop stop-color="#EDECF3"/>
				<stop offset="1" stop-color="#E6E5F5" stop-opacity="0.01"/>
			</radialGradient>
		</defs>
	</svg>

	<div class="container">
		<div class="grid md:grid-cols-12 gap-8 items-start">
			<!-- Left Column: Title & Description -->
			<div class="md:col-span-4 slide-in-up">
				<h2 class="text-4xl md:text-5xl font-bold mb-4 text-white">
					{title}
				</h2>
				<p class="text-xl text-white opacity-80">
					{subTitle}
				</p>
			</div>

			<!-- Right Column: Accordion Items -->
			<div class="md:col-span-8 space-y-4">
				{#each list as item, index}
					{@const IconComponent = iconMap[item.icon as keyof typeof iconMap]}
					<div class="use-case-glass-card">
						<button
							class="use-case-trigger w-full text-left p-6 flex items-center gap-4"
							onclick={() => toggle(index)}
							aria-expanded={openIndex === index}
						>
							<div class="use-case-icon">
								<IconComponent size={24} stroke={2} />
							</div>
							<div class="flex-1">
								<h3 class="text-xl font-bold mb-1 text-white">
									{item.title}
								</h3>
								<p class="text-base text-white opacity-80">
									{item.subtitle}
								</p>
							</div>
							<IconChevronDown
								size={24}
								class="flex-shrink-0 transition-transform duration-200 text-white"
								style="transform: rotate({openIndex === index ? 180 : 0}deg);"
							/>
						</button>

						{#if openIndex === index}
							<div class="px-6 pb-6 pt-2 use-case-content" transition:slide={{ duration: 300 }}>
								<p class="mb-4 text-white font-medium">
									{item.text}
								</p>
								<ul class="space-y-3">
									{#each item.list as listItem}
										<li class="flex items-start gap-3">
											<span class="text-white opacity-60">â€¢</span>
											<span class="text-white opacity-90">{listItem}</span>
										</li>
									{/each}
								</ul>
							</div>
						{/if}
					</div>
				{/each}
			</div>
		</div>
	</div>
</section>

<style>
	.use-cases-section {
		background: linear-gradient(180deg, var(--color-bg-button-primary-default) 0%, var(--color-bg-button-primary-active) 100%);
		color: white;
		width: 100vw;
		left: 50%;
		right: 50%;
		margin-left: -50vw;
		margin-right: -50vw;
		position: relative;
		overflow: hidden;
		padding: 120px 0;
	}

	.grid-background {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 100%;
		height: auto;
		pointer-events: none;
		z-index: 0;
		opacity: 0.6;
	}

	.container {
		position: relative;
		z-index: 1;
	}

	.use-case-glass-card {
		background: rgba(255, 255, 255, 0.1);
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
		border-radius: var(--radius-md);
		border: 1px solid rgba(255, 255, 255, 0.2);
		transition: all 0.3s ease;
		box-shadow: var(--shadow-glass-glow);
		overflow: hidden;
	}

	.use-case-glass-card:hover {
		background: rgba(255, 255, 255, 0.15);
		box-shadow: var(--shadow-glass-glow-strong);
	}

	.use-case-icon {
		background: rgba(255, 255, 255, 0.2);
		border-radius: 12px;
		padding: 12px;
		display: flex;
		align-items: center;
		justify-content: center;
		color: white;
		flex-shrink: 0;
		box-shadow: var(--shadow-glass-glow);
	}

	.use-case-trigger {
		background: transparent;
		border: none;
		cursor: pointer;
		outline: none;
	}

	.use-case-trigger:focus-visible {
		outline: 2px solid rgba(255, 255, 255, 0.5);
		outline-offset: 2px;
		border-radius: var(--radius-md);
	}

	.use-case-content {
		font-size: 1.125rem;
		line-height: 1.75;
	}

	.use-case-content p {
		font-size: 1.125rem;
	}

	.use-case-content li span {
		font-size: 1.125rem;
	}
</style>
